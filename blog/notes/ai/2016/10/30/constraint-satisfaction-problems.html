<!DOCTYPE html>
<html>
	<head>
		<title>Constraint Satisfaction Problems</title>
		<link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">
		<link rel="stylesheet" href="/css/main.css" type="text/css">
		<link href="https://fonts.googleapis.com/css?family=Antic+Slab|Catamaran|Hind:300|Inconsolata|Josefin+Sans|Muli:300,400i|Poiret+One|Rajdhani:300|Rock+Salt|Ruda|Scope+One|Shadows+Into+Light|Source+Code+Pro|Space+Mono" rel="stylesheet">
		<link rel="stylesheet" href="/css/github-markdown.css">

		<!-- Place jquery before bootstrap -->
		<script type="text/javascript" src="/js/jquery.min.js"></script>
		<script type="text/javascript" src="/js/bootstrap.min.js"></script>
	</head>
	<body>
		<nav class="navbar navbar-default navbar-fixed-top">
	<div class="container-fluid">

		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">MyCoon</a>
		</div>

		<div class="collapse navbar-collapse" id="navbar-collapse">

			<form class="navbar-form navbar-left">
				<div class="form-group">
					<input type="text" class="form-control" placeholder="Search">
				</div>
				<button type="submit" class="btn btn-default">Submit</button>
			</form>

			<ul class="nav navbar-nav navbar-right" id="nav-links">
				<li class="nav-home"><a href="/">Home</a></li>
				<li class="dropdown nav-blog">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
						Blog<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li><a href="/blog">MyCoon Blog</a></li>
						<li role="separator" class="divider"></li>
						<li><a href="/blog/categories">Categories</a></li>
						
							
						

						
							
							
							<li class="category">
								<a href="/blog/notes">
									<span>Notes</span>
									<span>23</span>
								</a>
							</li>
						
							
							
							<li class="category">
								<a href="/blog/tech">
									<span>Tech</span>
									<span>3</span>
								</a>
							</li>
						
						<li><a href="/blog/tags">Tags</a></li>
					</ul>
				</li>
				<li class="dropdown nav-tutorial">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
						Tutorials<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li><a href="/tutorial">MyCoon Tutorial</a></li>
						<li role="separator" class="divider"></li>
						<li><a href="/tutorial/categories">Categories</a></li>
						
							
						

						
						<li><a href="/tutorial/tags">Tags</a></li>
					</ul>
				</li>
				<li  class="nav-project"><a href="/project">Projects</a></li>
				<li class="nav-special" id="special"><a href="#">?</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</div><!-- /.container-fluid -->
</nav>
		<main class="page-content post" aria-label="Content">
	<div class="post-wrapper">
		<div class="wrapper">
	<article class="post-article" itemscope itemtype="http://schema.org/BlogPosting">

		<header class="post-header">
			<h1 class="post-title" itemprop="name headline">Constraint Satisfaction Problems</h1>
			<p class="post-meta">Oct 30, 2016
				 • Notes
				 • pyliaorachel
			</p>
		</header>

		

		<span class="separator"> • • • </span>

		<div class="post-content" itemprop="articleBody">
			<h2>Content</h2>

<ol>
<li>Constraint Satisfaction Problems (Backtracking Search) Overview

<ol>
<li>CSP v.s Traditional Search Problems</li>
<li>Feature Vectors</li>
<li>Constraint Graph</li>
</ol></li>
<li>Solving CSPs

<ol>
<li>Viewing CSP as Search Problem</li>
<li>Backtracking Search Algorithm</li>
<li>Constraint Propagation

<ol>
<li>Forward Checking</li>
<li>Generalizaed Arc Consistency</li>
<li>Heuristics</li>
</ol></li>
</ol></li>
</ol>

<!--more-->

<hr>

<h2>Constraint Satisfaction Problems (Backtracking Search) Overview</h2>

<h3>CSP v.s Traditional Search Problems</h3>

<ul>
<li>CSP does not care about the <em>sequence of moves</em> to reach goal state</li>
</ul>

<h3>Feature Vectors</h3>

<ul>
<li>Represent states as <strong>vectors of feature values</strong></li>
<li>Formalization

<ul>
<li>A set of <strong>features/variables</strong> <code>V1, ... Vn</code></li>
<li><strong>Domain</strong> for each variable <code>Dom[Vi]</code></li>
<li>A set of <strong>constraints</strong> <code>C1, ..., Cm</code>

<ul>
<li><strong>Scope</strong>: a set of variables it operates over</li>
<li>Unary, binary, higher-order constraints</li>
</ul></li>
<li><strong>State</strong>: assignment of value for each variable</li>
<li><strong>Partial state</strong>: assignment of value for some variables</li>
<li><strong>Goal state</strong>: a state satisfying all <strong>constraints</strong></li>
</ul></li>
</ul>

<h3>Constraint Graph</h3>

<ul>
<li>Nodes: <strong>variables</strong>; arcs: <strong>constraints</strong></li>
</ul>

<h2>Solving CSPs</h2>

<ul>
<li>Search through the space of partial assignments</li>
<li>Order of assignments does not matter</li>
<li>If we falsify a constraint, we immediately reject the current partial assignment</li>
</ul>

<h3>Viewing CSP as Search Problem</h3>

<ul>
<li><strong>Initial state</strong>: empty assignment</li>
<li><strong>Successor function</strong>: a value assigned to any unassigned variable s.t. no constraints return false</li>
<li><strong>Goal test</strong>: complete assignment</li>
</ul>

<h3>Backtracking Search Algorithm</h3>

<ul>
<li>Similar to DFS</li>
</ul>
<div class="highlight"><pre><code class="language-" data-lang="">BT(Level):
    If all variables assigned:
        PRINT Value of each Variable
        RETURN

    V := PickUnassignedVariable()
    Assigned[V] := TRUE
    for d := each member of Domain(V):
        Value[V] := d
        ConstraintsOK = TRUE
        for each constraint C such that
            a) V is a variable of C and
            b) all other variables of C are assigned: 
            If C is not satisfied by the set of current assignments:
                ConstraintsOK = FALSE
                break
        If ConstraintsOk == TRUE:
            BT(Level+1)
    Assigned[V] := FALSE //UNDO as we have tried all of V’s values return
</code></pre></div>
<h3>Constraint Propagation</h3>

<ul>
<li>Look ahead</li>
</ul>

<h4>Forward Checking</h4>

<ul>
<li>When instantiating a variable, check all constrants with <strong>only one ininstantiated variable</strong> remaining</li>
<li>Prune values of that variable that violate the constraint</li>
<li><p>Algorithm</p>
<div class="highlight"><pre><code class="language-" data-lang="">FCCheck(C,x):
    // C is a constraint with all its variables already assigned, except for variable x

    for d := each member of CurDom[x]:
        If making x = d together with previous assignments
    to variables in scope C falsifies C:
            remove d from CurDom[x]

    If CurDom[x] = {}:
        return DWO (Domain Wipe Out)
    Else:
        return ok

FC(Level):
    If all variables assigned:
        PRINT Value of each Variable
        RETURN

    V := PickAnUnassignedVariable()
    Assigned[V] := TRUE
    for d := each member of CurDom(V):
        Value[V] := d
        DWOoccured:= False
        for each constraint C over V such that
            a) C has only one unassigned variable X in its scope:
            If (FCCheck(C,X) == DWO):
                DWOoccurred:= True
                break
        If(not DWOoccured)
            FC(Level+1)
        RestoreAllValuesPrunedByFCCheck()
    Assigned[V] := FALSE
    return;
</code></pre></div></li>
</ul>

<h4>Generalizaed Arc Consistency</h4>

<ul>
<li><code>C(V1, ..., Vn)</code> is GAC with regard to <code>Vi</code> iff for every value of <code>Vi</code>, there exist values of <code>V1, ..., Vn</code> that satisfy C</li>
<li>If for <code>Vi = d</code> is not consistent wrt the constraint, <code>d</code> is <strong>arc inconsistent</strong> and can be removed from domain of <code>Vi</code></li>
<li>A constraint that is GAC may become non-GAC due to pruning of domain values during search</li>
<li><p>Algorithm</p>
<div class="highlight"><pre><code class="language-" data-lang="">GAC_Enforce():
// GAC-Queue contains all constraints one of whose variables has had its domain reduced

while GACQueue not empty:
    C = GACQueue.extract()
    for V := each member of scope(C):
        for d := CurDom[V]:
            Find an assignment A for all other variables in scope(C) such that C(A ∪ V=d) = True
            if A not found:
                CurDom[V] = CurDom[V] – d 
            if CurDom[V] = ∅:
                empty GACQueue
                return DWO
            else:
                push all constraints C’ s.t. V ∈ scope(C’) and C’ !∈ GACQueue on to GACQueue
return TRUE

GAC(Level):
    If all variables are assigned:
        PRINT Value of each Variable
        RETURN

    V := PickAnUnassignedVariable()
    Assigned[V] := TRUE
    for d := each member of CurDom(V):
        Value[V] := d
        Prune all values of V != d from CurDom[V]
        for each constraint C whose scope contains V:
            Put C on GACQueue
        if(GAC_Enforce() != DWO):
            GAC(Level+1)
        RestoreAllValuesPrunedFromCurDoms()

    Assigned[V] := FALSE
    return;
</code></pre></div>
<ul>
<li>May keep track of <strong>supports</strong> to avoid having to search through all possible assignments and check satisfication</li>
<li>Check if current support still valie, i.e. all values it assigns still lie in the variables&#39; current domains</li>
</ul></li>
</ul>

<h4>Heuristics</h4>

<ul>
<li>Ordering of variables

<ul>
<li><strong>Minimum Remaining Values (MRV)</strong>: returns the variable with the most constrained current domain</li>
<li><strong>Degree Heuristic (DH)</strong>: returns variable imposing the most constraints on remaining unassigned variables</li>
</ul></li>
<li>Ordering of values

<ul>
<li><strong>Least Constraining Value (LCV)</strong>: the best value is the one ruling out the fewest domain values in other variables that share at least one constraint with var</li>
</ul></li>
</ul>

		</div>

		<ul class="tag-list">
			

			<li class="tag">
				AI
			</li>

			

			<li class="tag">
				CSC384
			</li>

			

			<li class="tag">
				CSP
			</li>

			
		</ul>

	</article>

	
		<div id="disqus_thread"></div>
<script>
	var disqus_config = function () {
	    this.page.url = "https://pyliaorachel.github.io";
	    this.page.identifier = "/blog/notes/ai/2016/10/30/constraint-satisfaction-problems.html";
	};
	(function() {
	    var d = document, s = d.createElement('script');
	    s.src = '//pyliaorachel.disqus.com/embed.js';
	    s.setAttribute('data-timestamp', +new Date());
	    (d.head || d.body).appendChild(s);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	
</div>
	</div>
</main>
		<footer>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-4 footer-link">
				<a href="mailto:rachel5566kk@gmail.com">
					<span class="icon icon-email">
						<img src="/assets/svg/email-logo.svg" alt="Email Logo">
					</span>
					<span class="username">rachel5566kk@gmail.com</span>
				</a>
			</div>
			<div class="col-md-4 footer-link">
				<a href="https://github.com/pyliaorachel"  target="_blank">
					<span class="icon icon-github">
						<img src="/assets/svg/github-logo.svg" alt="GitHub Logo">
					</span>
					<span class="username">pyliaorachel</span>
				</a>
			</div>
			<div class="col-md-4 footer-link">
				<a href="https://tw.linkedin.com/in/peiyu-liao" target="_blank">
					<span class="icon icon-linkedin">
						<img src="/assets/svg/linkedin-logo.svg" alt="LinkedIn Logo">
					</span>
					<span class="username">Peiyu Liao</span>
				</a>
			</div>
		</div><!-- /.row -->
		<div class="row">
			<div class="footer-copy-right">
				<p>2016	&copy; Liao Peiyu</p>
			</div >
		</div><!-- /.row -->
	</div><!-- /.container-fluid -->
</footer>
		<script type="text/javascript" src="/js/main.js"></script>
		<script type="text/javascript" src="/js/home.js"></script>
		<script id="dsq-count-scr" src="//pyliaorachel.disqus.com/count.js" async></script>
	</body>
</html>