<!DOCTYPE html>
<html>
	<head>
		<title>Operating System - Scheduling</title>
		<link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">
		<link rel="stylesheet" href="/css/main.css" type="text/css">
		<link href="https://fonts.googleapis.com/css?family=Antic+Slab|Catamaran|Hind:300|Inconsolata|Josefin+Sans|Muli:300,400i|Poiret+One|Rajdhani:300|Rock+Salt|Ruda|Scope+One|Shadows+Into+Light|Source+Code+Pro|Space+Mono" rel="stylesheet">
		<link rel="stylesheet" href="/css/github-markdown.css">

		<!-- Place jquery before bootstrap -->
		<script type="text/javascript" src="/js/jquery.min.js"></script>
		<script type="text/javascript" src="/js/bootstrap.min.js"></script>
	</head>
	<body>
		<nav class="navbar navbar-default navbar-fixed-top">
	<div class="container-fluid">

		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">MyCoon</a>
		</div>

		<div class="collapse navbar-collapse" id="navbar-collapse">

			<form class="navbar-form navbar-left">
				<div class="form-group">
					<input type="text" class="form-control" placeholder="Search">
				</div>
				<button type="submit" class="btn btn-default">Submit</button>
			</form>

			<ul class="nav navbar-nav navbar-right" id="nav-links">
				<li class="nav-home"><a href="/">Home</a></li>
				<li class="dropdown nav-blog">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
						Blog<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li><a href="/blog">MyCoon Blog</a></li>
						<li role="separator" class="divider"></li>
						<li><a href="/blog/categories">Categories</a></li>
						
							
						

						
							
							
							<li class="category">
								<a href="/blog/notes">
									<span>Notes</span>
									<span>12</span>
								</a>
							</li>
						
							
							
							<li class="category">
								<a href="/blog/tech">
									<span>Tech</span>
									<span>1</span>
								</a>
							</li>
						
						<li><a href="/blog/tags">Tags</a></li>
					</ul>
				</li>
				<li class="dropdown nav-tutorial">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
						Tutorials<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li><a href="/tutorial">MyCoon Tutorial</a></li>
						<li role="separator" class="divider"></li>
						<li><a href="/tutorial/categories">Categories</a></li>
						
							
						

						
						<li><a href="/tutorial/tags">Tags</a></li>
					</ul>
				</li>
				<li  class="nav-project"><a href="/project">Projects</a></li>
				<li class="nav-special" id="special"><a href="#">?</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</div><!-- /.container-fluid -->
</nav>
		<main class="page-content post" aria-label="Content">
	<div class="post-wrapper">
		<div class="wrapper">
	<article class="post-article" itemscope itemtype="http://schema.org/BlogPosting">

		<header class="post-header">
			<h1 class="post-title" itemprop="name headline">Operating System - Scheduling</h1>
			<p class="post-meta">Oct 23, 2016
				 • Notes
				 • pyliaorachel
			</p>
		</header>

		

		<span class="separator"> • • • </span>

		<div class="post-content" itemprop="articleBody">
			<h2>Content</h2>

<ol>
<li>Scheduling Overview</li>
<li>Scheduling Policies</li>
<li>Multiprocessor Scheduling</li>
</ol>

<!--more-->

<hr>

<h2>Scheduling Overview</h2>

<ul>
<li>Prevent <code>thread starvation</code>, BUT <code>context switching</code> is expensive</li>
<li>Runs another program when I/O performed</li>
<li>Goals

<ul>
<li><strong>Batch systems</strong>: Long running, no interactive users, no time constraints

<ul>
<li><code>CPU utilization</code>

<ul>
<li>% of time CPU is busy</li>
</ul></li>
<li><code>Throughput</code>

<ul>
<li># of programs complete per unit time</li>
</ul></li>
<li><code>Turnaround time</code>

<ul>
<li>Total time to finish a program</li>
<li><code>turnaround = processing + waiting</code></li>
</ul></li>
</ul></li>
<li><strong>Interactive (general-purpose) systems</strong>: Short running, interactive suers, weak time constraints

<ul>
<li><code>Response time</code>

<ul>
<li>Time between <em>receiving request</em> &amp; starting to <em>produce output</em></li>
</ul></li>
</ul></li>
</ul></li>
</ul>

<h2>Scheduling Policies</h2>

<ul>
<li><strong>Batch systems</strong>

<ul>
<li>Policies

<ul>
<li><code>FIFO</code> (non-preemptive)

<ul>
<li>In order of arrival time</li>
<li>Run thread until completion</li>
</ul></li>
<li><code>Shortest job first</code> (non-preemptive)

<ul>
<li>In order of shortest running time</li>
<li>Run thread until completion</li>
<li>Starving long jobs</li>
</ul></li>
<li><code>Shortest remaining time</code> (preemptive)

<ul>
<li>In order of shortest remaining time</li>
<li>Run thread until completion OR another thread arrives</li>
<li>Preemptive version of <code>shortest job first</code></li>
<li>Starving long jobs</li>
<li>Optimal w.r.t. avg waiting time</li>
</ul></li>
</ul></li>
<li>Properties

<ul>
<li>Some require estimate of preocessing time</li>
<li>May starve long running threads</li>
<li>Long response time</li>
</ul></li>
</ul></li>
<li><strong>Interactive systems</strong>

<ul>
<li>Policies

<ul>
<li><code>Round-Robin</code>

<ul>
<li>Preemptive version of <code>FIFO</code></li>
<li><code>Time slice</code>

<ul>
<li>Upper time bound each process runs </li>
<li><code>time slice &gt;&gt; context switch time</code></li>
<li><code>cs overhead = cs/(ts+cs)</code></li>
</ul></li>
<li>Run thread until <code>time slice</code> interrupt OR thread blocks</li>
<li>Effectiveness:

<ul>
<li># of threads</li>
<li>Size of <code>time slice</code><br>
<strong>Long</strong> -&gt; slow response<br>
<strong>Short</strong> -&gt; high overhead</li>
</ul></li>
<li>Does not require estimation of job processing time; no <code>starvation</code>; enables <code>interactivity</code> by limiting the amount of time each thread can run</li>
<li>Reduces <code>throughtput</code> due to frequent <code>context switching</code></li>
</ul></li>
<li><code>Static priority</code>

<ul>
<li>In order of priority assigned</li>
<li>Starving low prioriy threads</li>
<li><em>Priority inversion</em>: low priority threads holding locks that high priority threads want</li>
</ul></li>
<li><code>Multi-level queue</code>

<ul>
<li>High, medium, &amp; low PQs</li>
<li>Choose from high-priority PQ first (e.g. I/O threads)</li>
<li>For each queue, <code>round-robin</code> scheduling</li>
</ul></li>
<li><code>Dynamic priority (feedback)</code>

<ul>
<li>Priority changed based on thread behavior; CPU-bound threads have priority reduced</li>
</ul></li>
</ul></li>
</ul></li>
<li><code>Feedback scheduling</code>

<ul>
<li>Goals

<ul>
<li>Allocate CPU fairly</li>
<li>I/O-bound threads receive higher priority</li>
</ul></li>
<li>Each thread:

<ul>
<li>CPU usage (C)</li>
<li>Current priority (Pi)</li>
<li>Initial priority (P0)</li>
<li>Nice value (N)</li>
</ul></li>
<li>Steps

<ol>
<li>Scheduler chooses thread with the <strong>smallest</strong> Pi</li>
<li>On timer interrupt, update CPU C of running thread <code>C = C + 1</code></li>
<li>Every time slice, update Pi <code>Pi = Pi-1/2 + C + N</code></li>
<li>Reset C for all threads</li>
</ol></li>
<li><code>Time slice</code>

<ul>
<li>Many interrupts in between <code>time slice</code> to avoid excessive <code>context switches</code></li>
<li>A <code>thread</code> runs for a full <code>time slice</code> unless:

<ul>
<li>The <code>thread</code> blocks</li>
<li>Some blocked <code>thread</code> wakesup</li>
</ul></li>
<li>Longer <code>time slice</code> improves throughput</li>
</ul></li>
</ul></li>
</ul>

<h2>Multiprocessor Scheduling</h2>

<ul>
<li>Asymetric multiprocessing

<ul>
<li>1 processor runs all OS code, I/O processing code, etc.</li>
<li>Others run user code</li>
<li>Simple implementation</li>
</ul></li>
<li>Symmetric multiprocessing (SMP)

<ul>
<li>All processors fun OS &amp; user code</li>
<li>Efficient</li>
<li>Difficult implementation</li>
<li>Scheduling issues

<ul>
<li><strong>Processor affinity</strong>

<ul>
<li>Cache issue, want to ensure <code>threads</code> run on the same <code>thread</code> before</li>
<li><code>Hard affinity</code>: a <code>thread</code> specifies which processor it wants to use</li>
</ul></li>
<li><strong>Load balancing</strong>

<ul>
<li>Single ready queue: easy BUT tends to bottleneck because each processor needs a spinlock for ready queue</li>
<li>1 ready queue per processor: scalable BUT <em>task migration</em> &amp; <em>load balancing</em> tricky<br>

<ul>
<li><em>task migration</em>  -<br>
Deadlock?</li>
<li><em>load balancing</em>  -<br>
<code>Push migration</code>: thread find less-busy processors<br>
<code>Pull migration</code>: idle processor find thread on busy processors</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>

		</div>

		<ul class="tag-list">
			

			<li class="tag">
				OS
			</li>

			

			<li class="tag">
				ECE344
			</li>

			

			<li class="tag">
				scheduling
			</li>

			
		</ul>

	</article>

	
		<div id="disqus_thread"></div>
<script>
	var disqus_config = function () {
	    this.page.url = "https://pyliaorachel.github.io";
	    this.page.identifier = "/blog/notes/os/2016/10/23/operating-system-scheduling.html";
	};
	(function() {
	    var d = document, s = d.createElement('script');
	    s.src = '//pyliaorachel.disqus.com/embed.js';
	    s.setAttribute('data-timestamp', +new Date());
	    (d.head || d.body).appendChild(s);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	
</div>
	</div>
</main>
		<footer>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-4 footer-link">
				<a href="mailto:rachel5566kk@gmail.com">
					<span class="icon icon-email">
						<img src="/assets/svg/email-logo.svg" alt="Email Logo">
					</span>
					<span class="username">rachel5566kk@gmail.com</span>
				</a>
			</div>
			<div class="col-md-4 footer-link">
				<a href="https://github.com/pyliaorachel"  target="_blank">
					<span class="icon icon-github">
						<img src="/assets/svg/github-logo.svg" alt="GitHub Logo">
					</span>
					<span class="username">pyliaorachel</span>
				</a>
			</div>
			<div class="col-md-4 footer-link">
				<a href="https://tw.linkedin.com/in/peiyu-liao" target="_blank">
					<span class="icon icon-linkedin">
						<img src="/assets/svg/linkedin-logo.svg" alt="LinkedIn Logo">
					</span>
					<span class="username">Peiyu Liao</span>
				</a>
			</div>
		</div><!-- /.row -->
		<div class="row">
			<div class="footer-copy-right">
				<p>2016	&copy; Liao Peiyu</p>
			</div >
		</div><!-- /.row -->
	</div><!-- /.container-fluid -->
</footer>
		<script type="text/javascript" src="/js/main.js"></script>
		<script type="text/javascript" src="/js/home.js"></script>
		<script id="dsq-count-scr" src="//pyliaorachel.disqus.com/count.js" async></script>
	</body>
</html>