<!DOCTYPE html>
<html>
	<head>
		<title>Operating System - Disk & RAID</title>
		<link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">
		<link rel="stylesheet" href="/css/main.css" type="text/css">
		<link href="https://fonts.googleapis.com/css?family=Antic+Slab|Catamaran|Hind:300|Inconsolata|Josefin+Sans|Muli:300,400i|Poiret+One|Rajdhani:300|Rock+Salt|Ruda|Scope+One|Shadows+Into+Light|Source+Code+Pro|Space+Mono" rel="stylesheet">
		<link rel="stylesheet" href="/css/github-markdown.css">

		<!-- Place jquery before bootstrap -->
		<script type="text/javascript" src="/js/jquery.min.js"></script>
		<script type="text/javascript" src="/js/bootstrap.min.js"></script>
	</head>
	<body>
		<nav class="navbar navbar-default navbar-fixed-top">
	<div class="container-fluid">

		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">MyCoon</a>
		</div>

		<div class="collapse navbar-collapse" id="navbar-collapse">

			<form class="navbar-form navbar-left">
				<div class="form-group">
					<input type="text" class="form-control" placeholder="Search">
				</div>
				<button type="submit" class="btn btn-default">Submit</button>
			</form>

			<ul class="nav navbar-nav navbar-right" id="nav-links">
				<li class="nav-home"><a href="/">Home</a></li>
				<li class="dropdown nav-blog">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
						Blog<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li><a href="/blog">MyCoon Blog</a></li>
						<li role="separator" class="divider"></li>
						<li><a href="/blog/categories">Categories</a></li>
						
							
						

						
							
							
							<li class="category">
								<a href="/blog/notes">
									<span>Notes</span>
									<span>32</span>
								</a>
							</li>
						
							
							
							<li class="category">
								<a href="/blog/tech">
									<span>Tech</span>
									<span>3</span>
								</a>
							</li>
						
						<li><a href="/blog/tags">Tags</a></li>
					</ul>
				</li>
				<li class="dropdown nav-tutorial">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
						Tutorials<span class="caret"></span>
					</a>
					<ul class="dropdown-menu">
						<li><a href="/tutorial">MyCoon Tutorial</a></li>
						<li role="separator" class="divider"></li>
						<li><a href="/tutorial/categories">Categories</a></li>
						
							
						

						
						<li><a href="/tutorial/tags">Tags</a></li>
					</ul>
				</li>
				<li  class="nav-project"><a href="/project">Projects</a></li>
				<li class="nav-special" id="special"><a href="#">?</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</div><!-- /.container-fluid -->
</nav>
		<main class="page-content post" aria-label="Content">
	<div class="post-wrapper">
		<div class="wrapper">
	<article class="post-article" itemscope itemtype="http://schema.org/BlogPosting">

		<header class="post-header">
			<h1 class="post-title" itemprop="name headline">Operating System - Disk & RAID</h1>
			<p class="post-meta">Dec 1, 2016
				 • Notes
				 • pyliaorachel
			</p>
		</header>

		

		<span class="separator"> • • • </span>

		<div class="post-content" itemprop="articleBody">
			<h2>Content</h2>

<ol>
<li>Disks

<ul>
<li>Disk Scheduling Algorithms</li>
</ul></li>
<li>Redundant Array of Inexpensive Disks (RAID)</li>
</ol>

<!--more-->

<hr>

<h2>Disks</h2>

<ul>
<li>Structure

<ul>
<li><strong>Disk</strong>

<ul>
<li><strong>Platters</strong>

<ul>
<li>1 <strong>arm</strong>: move together</li>
<li>1 <strong>head</strong>: access data in parallel</li>
<li>Concentric <strong>tracks</strong>: same track across different platters

<ul>
<li><strong>Sectors</strong>: preamble + data + 16B of ECC</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li>Disk access delays

<ul>
<li><strong>Seek time</strong>: move head to correct track</li>
<li><strong>Rotational delay</strong>: rotate to correct sector</li>
<li><strong>Transfer time</strong>: r/w bits of sector (fastest among all)</li>
</ul></li>
<li>Disk performance trends

<ul>
<li><strong>Capacity</strong>: 2x every 2 years</li>
<li><strong>Transfer rate (BW)</strong>: 2x every 2 years</li>
<li><strong>Seek &amp; rotation time</strong>: 1/2 every 10 years</li>
</ul></li>
<li>Disk performance

<ul>
<li>Highest bandwidth for sequential access</li>
<li>Worst bandwidth for random access</li>
</ul></li>
<li>Disk scheduling

<ul>
<li>Aims to minimize <strong>seek time</strong> (<strong>rotational delay</strong> hard to control)</li>
</ul></li>
<li>Addressing disks

<ul>
<li>Older disks: require OS to specify all parameters e.g. cylinder, track, sector, transfer size, etc.</li>
<li>Modern disks: complicated e.g. not all sectors the same size, sectors are remapped, etc.</li>
<li>Current disks: higher-level interface, exports data as logical array of sectors &amp; maps logical sectors to its surface</li>
</ul></li>
<li>Disk errors

<ul>
<li>Latent sector errors, mis-directed writes</li>
<li>Transient v.s. hard errors</li>
<li>Some errors can be masked by <strong>ECC</strong></li>
<li><strong>Bad sectors</strong>: physical damage; mapped to spare in factory, by disk controller</li>
</ul></li>
</ul>

<h3>Disk Scheduling Algorithms</h3>

<p>Aims to minimize <strong>seek time</strong> (<strong>rotational delay</strong> hard to control).</p>

<ul>
<li>2 methods

<ul>
<li>Reduce seek &amp; rotation</li>
<li>Read several sectors at once</li>
</ul></li>
<li>Algorithms

<ul>
<li><strong>FCFS</strong>

<ul>
<li>Simple, fair, slow</li>
</ul></li>
<li><strong>Shortest seek time first (SSF)</strong>

<ul>
<li>Starvation</li>
</ul></li>
<li><strong>SCAN (elevator)</strong>: serve next request in same direction (a bit to track arm direction)

<ul>
<li>Benefits tracks in the middle more</li>
</ul></li>
<li><strong>C-SCAN</strong>: SCAN in one direction</li>
</ul></li>
</ul>

<h2>Redundant Array of Inexpensive Disks (RAID)</h2>

<p>Use many disks in parallel; increases storage bandwidth, improves reliability.</p>

<ul>
<li><strong>Stripe</strong>: unit of r/w to RAID

<ul>
<li><strong>Chunks/Strips</strong>: unit of r/w to a single disk</li>
</ul></li>
<li>Improving storage bandwidth

<ul>
<li>Chunks on different disks can be r/w in parallel</li>
<li>Large chunk size:

<ul>
<li>Fewer seeks across disks -&gt; better throughput</li>
</ul></li>
<li>More disks:

<ul>
<li>Bandwidth increases</li>
</ul></li>
<li>Large stripe size:

<ul>
<li>Internal fragmentation</li>
<li>Should be based on average file size</li>
</ul></li>
</ul></li>
</ul>

<h3>RAID Level 0: Disk Striping</h3>

<p>Distributes data across several disks for speed. No redundancy.</p>
<div class="highlight"><pre><code class="language-" data-lang="">| Strip 0 | | Strip 1 | | Strip 2 | | Strip 3 |
| Strip 4 | | Strip 5 | | Strip 6 | | Strip 7 |
| Strip 8 | | Strip 9 | | Strip 10| | Strip 11|
</code></pre></div>
<h3>RAID Level 1: Mirroring</h3>

<p>Backup. Write both, read either.<br>
Utilization: 50%</p>
<div class="highlight"><pre><code class="language-" data-lang="">| Strip 0 | | Strip 1 | | Strip 2 | | Strip 3 | | Strip 0 | | Strip 1 | | Strip 2 | | Strip 3 |
| Strip 4 | | Strip 5 | | Strip 6 | | Strip 7 | | Strip 4 | | Strip 5 | | Strip 6 | | Strip 7 |
| Strip 8 | | Strip 9 | | Strip 10| | Strip 11| | Strip 8 | | Strip 9 | | Strip 10| | Strip 11|
</code></pre></div>
<h3>RAID Level 4: Dedicated Parity Disk</h3>

<p>Calculate XOR value of chunks and store on parity disk.
Utilization: (N-1)/N</p>
<div class="highlight"><pre><code class="language-" data-lang=""># P0-3 = S0 ^ S1 ^ S2 ^ S3
# P'0-3 = S'0 ^ S1 ^ S2 ^ S3 = S'0 ^ S0 ^ P0-3

| Strip 0 | | Strip 1 | | Strip 2 | | Strip 3 | | P0-3 |
| Strip 4 | | Strip 5 | | Strip 6 | | Strip 7 | | P4-7 |
| Strip 8 | | Strip 9 | | Strip 10| | Strip 11| | P8-11|
</code></pre></div>
<h3>RAID Level 5: Distributed Parity</h3>

<p>Parity information distributed across all disks. Avoids bottleneck for parity disk.</p>
<div class="highlight"><pre><code class="language-" data-lang="">| Strip 0 | | Strip 1 | | Strip 2 | | Strip 3 | | P0-3    |
| Strip 4 | | Strip 5 | | Strip 6 | | P4-7    | | Strip 7 |
| Strip 8 | | Strip 9 | | P8-11   | | Strip 10| | Strip 11|
</code></pre></div>
<h4>Resources</h4>

<ul>
<li><a href="http://www.zdnet.com/article/chunks-the-hidden-key-to-raid-performance/">Chunks: the hidden key to RAID performance</a></li>
<li><a href="http://www.pcguide.com/ref/hdd/perf/raid/concepts/perfStripe-c.html">Stripe Width and Stripe Size</a></li>
</ul>

		</div>

		<ul class="tag-list">
			

			<li class="tag">
				OS
			</li>

			

			<li class="tag">
				ECE344
			</li>

			

			<li class="tag">
				disk
			</li>

			
		</ul>

	</article>

	
		<div id="disqus_thread"></div>
<script>
	var disqus_config = function () {
	    this.page.url = "https://pyliaorachel.github.io";
	    this.page.identifier = "/blog/notes/os/2016/12/01/operating-system-disk-and-raid.html";
	};
	(function() {
	    var d = document, s = d.createElement('script');
	    s.src = '//pyliaorachel.disqus.com/embed.js';
	    s.setAttribute('data-timestamp', +new Date());
	    (d.head || d.body).appendChild(s);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	
</div>
	</div>
</main>
		<footer>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-4 footer-link">
				<a href="mailto:rachel5566kk@gmail.com">
					<span class="icon icon-email">
						<img src="/assets/svg/email-logo.svg" alt="Email Logo">
					</span>
					<span class="username">rachel5566kk@gmail.com</span>
				</a>
			</div>
			<div class="col-md-4 footer-link">
				<a href="https://github.com/pyliaorachel"  target="_blank">
					<span class="icon icon-github">
						<img src="/assets/svg/github-logo.svg" alt="GitHub Logo">
					</span>
					<span class="username">pyliaorachel</span>
				</a>
			</div>
			<div class="col-md-4 footer-link">
				<a href="https://tw.linkedin.com/in/peiyu-liao" target="_blank">
					<span class="icon icon-linkedin">
						<img src="/assets/svg/linkedin-logo.svg" alt="LinkedIn Logo">
					</span>
					<span class="username">Peiyu Liao</span>
				</a>
			</div>
		</div><!-- /.row -->
		<div class="row">
			<div class="footer-copy-right">
				<p>2016	&copy; Liao Peiyu</p>
			</div >
		</div><!-- /.row -->
	</div><!-- /.container-fluid -->
</footer>
		<script type="text/javascript" src="/js/main.js"></script>
		<script type="text/javascript" src="/js/home.js"></script>
		<script id="dsq-count-scr" src="//pyliaorachel.disqus.com/count.js" async></script>
	</body>
</html>